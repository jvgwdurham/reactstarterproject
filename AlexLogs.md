# Learning log for Programming Black
**Log 1:** 
For this assignment, me and a group of friends decided that we would work on a collaborative project together. Choosing what project to start working on was initially one of the harder tasks we had on our plates as there were a large number of potential projects that we could start working on. After some deliberation, we decided that working together on a Javascript project would be best. Initially the projects that we considered were: a live weather app, a 2d platformer and a map generator/editor for D&D. 

We considered trying projects in other languages (such as a graphics and physics engine in C++) but we decided against it as we already had members of the group that were profficient with graphics programming in C. We wanted to keep the creative element of graphics programming and have the project be in a language that all of us knew to a basic level. 

Another idea that we considered was a project in Azure to process big data such as a real-time data visualisation project to visualise data from public sources where we would use Azure's data factory system to manage several data pipelines which we would then feed into a machine learning model to predict trends in the data. We quickly realised that this was far too complex for a group of 3 people to do in 6 weeks. 

So we decided that p5.js and openProcessing would be a major component of our project. We also wanted the reusability and versitility of React, so we chose that to be the other major component of our project. In the end, we decided on a live weather map using react to allow for easy single page webapp development, p5.js for the drawing and rendering of the map and weather symbols.

Before this, We attempted to start development on a 2d portal platformer in p5play.js, a physics engine for p5.js based on planck.js and got to the stage of sprites moving around in a game area and a working portal game mechanic. We shelved this idea after some deliberation as we quickly realised that we couldnt implement react in any meaningful way and that the complexity of creating a functional and entertaining 2d game was much harder than we initially thought.  

**Log 2:**
So now that we finally decided on a project, being the weather app based on react.js and p5.js, we had to figure out what we needed to do to get a prototype. We first looked at several websites that are similar to what we wanted to achieve, for example, we looked at: BBC Weather, The Weather Channel and the met office website for the weather. We decided to take some of the aspects that we liked the most from each site, for example we liked the way that BBC Weather and the met office displayed hourly weather, so we decided to create our own spin on that feature. 

We quickly realised that we would need some premade styles beyond the default style that react has, so we decided to use Tailwind CSS to begin styling our componenets in react, One issue with this is that Tailwind replaces a lot of the default styles for html tags, meaning that it broke most of the design that we had already. To fix this we had to disable preflight in the tailwind config file. We decided to use a colour pallete based on the default colours that the react template ships with as we liked the darker aesthetic of the site. 

For our site to function, we needed somewhere to get weather data and map data. we looked around and considered several options. For weather data, luckily there are several free api's available on the internet such as weatherapi, forecastapi and meteostat. Out of those three, the best solution for our site was weatherapi as it provided a simple api for grabbing weather data in a structured form, it had the best free api tier, providing a 14 day forecast for free. 

As for map data, this was much harder. We researched into using GIS data and shapefiles for drawing the map, however we decided that this was far too complicated for the timeframe that we needed to get a prototype completed. A much simpler solution that we could've used was directly taking a screenshot from a map and noting down the coordinates of the screenshot. Since we were only providing weather services for county durham, this would've allowed us to take a screenshot and draw weather data over it while keeping details and accuracy. 

While this would've kept enough details for that area of durham, it wouldve prevented any future expansion of the site as we would be limiting our system to only working with screenshots of areas. It would've also prevented users from being able to zoom in, as zooming in would only result in a pixelated mess. So instead of this, we decided to use openstreepmaps, which has an API that lets us embed a map into p5.js and draw over it. Since we were able to directly get coordinates from openstreetmaps as well as the map, we could easily draw weather data over the map.

**Log 3:**
Now that we decided on which apis to use, we needed to start designing the site in according to the specification we set earlier. This is where we divided the tasks amonst our group and set up a trello board to track issues and features to implement. From here we worked seperately on individual features of the site. I decided to work on the weather information and forecast panel which we wanted to display hourly weather, the current weather - showing the current weather condition, temperature and wind speed, and the average forecast for the next 3 days. 

Before this project I didn't know any javascript frameworks, so since I had to work in react, I decided to jump in and attempt to create some site functionallity. I learned that react was based on creating reusable components, that can be re-rendered without redrawing the whole page again, so I wanted to use this functionality to my advantage later on. Initially however, I started by just creating some functions to render HTML as components with information on them. I quickly realised that having react components as a class was beneficial as each component would have its own state that would need to be managed. 

After prototyping a basic version of each component, I quickly realised that just changing the value of class attributes was not enough to have them dynamically update. I found out that this was because I was using state incorrectly. I learned that in react, state is a common class attribute to the component base class, and in the case of state being updated, the whole component is redrawn. so using state and setState for updating data when a request is recieved is best.

**Log 4:**
As the components I was creating gained more functionality, I realised that rather than creating seperate fetch requests in each child component, was slow and network inefficient as I essentially had to perform 27 requests for each of the hours and other components, I had to figure out some way to pass information down to each child component from the parent, a container for all of the weather widgets. I also had to pass information out of the weather container for the other contributers to use for other components. 

For this I found several solutions, including: prop drilling, references and callback functions. I decided against using prop drilling as there weren't too many components that relied on each other. As for references and callbacks, references allowed me to call functions of a child class from its reference and pass data to the child class, which allowed me to request data from the weather API and update each of the child components once it has been processed. 

This also came with an added benefit of not having to redraw the parent class. Passing a callback function down the props of a child class also allowed me to have child components pass data back up to the parent class, which was important for passing weather data back for other components. 

After a lot of trial and error, we decided against using openstreetmaps and drawing above it as syncing up the coordinates with where to draw and getting weather data for a wider region versus a specific point proved to be a much harder task than we first anticipated. We stepped back our goals and decided to instead have a general forecast with an animated background made in p5.js for the forecast service. 